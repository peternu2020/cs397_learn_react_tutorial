(window["webpackJsonpnew-shopping-cart"]=window["webpackJsonpnew-shopping-cart"]||[]).push([[0],{24:function(e,t,n){e.exports=n(41)},29:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(9),o=n.n(i),c=(n(29),n(10)),u=n(6),s=(n(30),n(7)),l=n(20),p=(n(19),n(34),n(4)),g=n.n(p),h=(n(35),n(17),n(22)),d=n.n(h);n(18);g.a.initializeApp({apiKey:"AIzaSyA3jGXaGPBvzgiTynqez7KwIkhlXhynukE",authDomain:"nu-cs397-learn-react-tutorial.firebaseapp.com",databaseURL:"https://nu-cs397-learn-react-tutorial.firebaseio.com",projectId:"nu-cs397-learn-react-tutorial",storageBucket:"nu-cs397-learn-react-tutorial.appspot.com",messagingSenderId:"991910079553",appId:"1:991910079553:web:6700a5475d022d9e75eac0"});var f=g.a.database().ref(),S={signInFlow:"popup",signInOptions:[g.a.auth.GoogleAuthProvider.PROVIDER_ID],callbacks:{signInSuccessWithAuthResult:function(){return!1}}},m=g.a.initializeApp({apiKey:"AIzaSyDuJiDx3nyQ_i1dCh0CUsGoFhuf_iD24Ns",authDomain:"nu-cs397-learn-react-userdb.firebaseapp.com",databaseURL:"https://nu-cs397-learn-react-userdb.firebaseio.com",projectId:"nu-cs397-learn-react-userdb",storageBucket:"nu-cs397-learn-react-userdb.appspot.com",messagingSenderId:"1041177555949",appId:"1:1041177555949:web:dd896888f0a972a7adede4"},"secondary");m.database().ref();function C(e,t){for(var n=[],a=[],r=[],i=[],o=0;o<e.length;o++)0==o?(n.push(e[o]),a.push(1),r.push(e[o][e[o].length-1]),i.push(t[o])):o>0&&(!1===n.includes(e[o])?(n.push(e[o]),a.push(1),r.push(e[o][e[o].length-1]),i.push(t[o])):a[n.indexOf(e[o])]++),e[o];return[n,a,r,i]}var v=["XS","S","M","L","XL"],b=function(e){var t=e.state;return r.a.createElement("div",{className:"field has-addons"},Object.values(v).map((function(e){return r.a.createElement("button",{key:e,className:(n=e===t.size,n?"button is-success is-selected":"button"),onClick:function(){return t.setSize(e)}},e);var n})))},E=function(e){var t=e.ShoppingCart,n=e.setShoppingCart,a=e.ShoppingCart2,i=e.setShoppingCart2,o=e.user,c=C(t,a);return t.length<=0&&a.length<=0?r.a.createElement("p",null,"Total: $0.00"):t.length==a.length?r.a.createElement(r.a.Fragment,null,c[0].map((function(e,o){if(0==f.child(String(c[0][o])+"/quantity/"))n((function(e){return e.filter((function(e){return e!==c[0][o]}))})),i((function(e){return e.filter((function(e){return e!==c[3][o]}))})),window.confirm(String(c[3][o].title)+" in size:"+String(c[3][o].size)+"is now out of stock and has been removed from your cart.");else{if(!(c[1][o]>f.child(String(c[0][o])+"/quantity/")))return r.a.createElement(y,{key:e,product:c[3][o],product_img_src:"data/products/"+c[0][o].slice(0,-2)+"_2.jpg",quantity:c[1][o],ShoppingCart:t,setShoppingCart:n,ShoppingCart2:a,setShoppingCart2:i});for(;c[1][o]>f.child(String(c[0][o])+"/quantity/");){var s=a.indexOf(c[3][o]);t.splice(s,1),a.splice(s,1),n((function(e){return Object(u.a)(e)})),i((function(e){return Object(u.a)(e)}))}window.confirm("The quantity you selected for "+String(c[3][o].title)+" in size:"+String(c[3][o].size)+"is no longer available and your cart has been updated with the remaining stock available.")}})),r.a.createElement("p",null,"Total: $ ",r.a.createElement(k,{ShoppingCart2:a})),r.a.createElement(s.a,{variant:"primary",onClick:function(){null!=o?(c[0].map((function(e,t){return f.child(String(c[0][t])+"/quantity/").transaction((function(e){return Math.max(e-c[1][t]||0)}))})),n((function(e){return[]})),i((function(e){return[]}))):window.confirm("Please sign in to checkout.")}},"Checkout")):null},O=function(e){var t=e.product,n=e.product_img_src,a=e.ShoppingCart,i=e.setShoppingCart,o=e.ShoppingCart2,c=e.setShoppingCart2;return r.a.createElement(s.b,null,r.a.createElement("a",{onClick:function(){0==a.includes(t.sku+"_"+t.size)?(i((function(e){return[].concat(Object(u.a)(e),[t.sku+"_"+t.size])})),c((function(e){return[].concat(Object(u.a)(e),[t])}))):C(a,o)[1][C(a,o)[0].indexOf(t.sku+"_"+t.size)]<t.quantity&&(i((function(e){return[].concat(Object(u.a)(e),[t.sku+"_"+t.size])})),c((function(e){return[].concat(Object(u.a)(e),[t])})))}},r.a.createElement(s.b.Image,null,r.a.createElement(s.c.Container,{size:"6by3"},r.a.createElement("img",{src:n}))),t.title,r.a.createElement("br",null),"$",t.price,r.a.createElement("br",null)))},j=function(e){var t=e.products,n=e.ShoppingCart,a=e.setShoppingCart,i=e.ShoppingCart2,o=e.setShoppingCart2,u=r.a.useState("S"),l=Object(c.a)(u,2),p=l[0],g=l[1],h=t.filter((function(e){return p===e.size}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(b,{state:{size:p,setSize:g}}),r.a.createElement(s.a.Group,null,h.map((function(e){if(e.quantity>0)return r.a.createElement(O,{key:e.sku,product:e,product_img_src:"data/products/"+e.sku+"_1.jpg",ShoppingCart:n,setShoppingCart:a,ShoppingCart2:i,setShoppingCart2:o})}))))},y=function(e){var t=e.product,n=e.product_img_src,a=e.quantity,i=e.ShoppingCart,o=e.setShoppingCart,c=e.ShoppingCart2,l=e.setShoppingCart2;return r.a.createElement(s.b,null,r.a.createElement(s.b.Image,null,r.a.createElement(s.c.Container,{size:"2by2"},r.a.createElement("img",{src:n}))),t.title,r.a.createElement("br",null),t.style,r.a.createElement("br",null),"Size:",t.size,r.a.createElement("br",null),"$",t.price,r.a.createElement("br",null),"Quantity: ",a," ",r.a.createElement(s.a,{rounded:"true",size:"small",color:"info",onClick:function(){var e=c.indexOf(t);i.splice(e,1),c.splice(e,1),o((function(e){return Object(u.a)(e)})),l((function(e){return Object(u.a)(e)}))}},"-")," ",r.a.createElement(s.a,{rounded:"true",size:"small",color:"danger",onClick:function(){o((function(e){return e.filter((function(e){return e!==t.sku+"_"+t.size}))})),l((function(e){return e.filter((function(e){return e!==t}))}))}},"x"))},k=function(e){var t=e.ShoppingCart2;return Math.floor(100*t.reduce((function(e,t){return e+t.price}),0))/100},w=function(){return r.a.createElement(d.a,{uiConfig:S,firebaseAuth:g.a.auth()})},z=function(e){var t=e.ShoppingCart,n=e.ShoppingCart2,a=e.user,r=e.PreviousRetrieved;if(null!=a&&0!=r){var i=g.a.auth().currentUser.uid;console.log("UpdateUserSavedCart:",i),m.database().ref(String(i)).once("value").then((function(e){1==e.hasChild("SavedShoppingCart")&&1==e.hasChild("SavedShoppingCart2")?(console.log("UpdateUserSavedCart Firebase entry exists"),m.database().ref(String(i)+"/SavedShoppingCart").transaction((function(e){return t})),m.database().ref(String(i)+"/SavedShoppingCart2").transaction((function(e){return n}))):(console.log("UpdateUserSavedCart Firebase entry does not exist yet"),m.database().ref(String(i)+"/").set({SavedShoppingCart:t,SavedShoppingCart2:n}))}))}return null},R=function(e){var t=e.user;e.setShoppingCart,e.setShoppingCart2,e.setPreviousRetrieved;return r.a.createElement(s.e,{color:"info"},r.a.createElement(s.e.Header,null,"Welcome, ",t.displayName,r.a.createElement(s.a,{primary:!0,onClick:function(){g.a.auth().signOut()}},"Log out")))},I=function(e){var t=e.user,n=e.ShoppingCart,a=e.setShoppingCart,i=e.ShoppingCart2,o=e.setShoppingCart2,c=e.setPreviousRetrieved,u=e.PreviousRetrieved;return t?r.a.createElement(r.a.Fragment,null,r.a.createElement(z,{ShoppingCart:n,ShoppingCart2:i,user:t,PreviousRetrieved:u}),r.a.createElement(R,{user:t,setShoppingCart:a,setShoppingCart2:o,setPreviousRetrieved:c})):r.a.createElement(w,null)},_=function(e){var t=e.user,n=e.setShoppingCart,a=e.setShoppingCart2,r=e.PreviousRetrieved,i=e.setPreviousRetrieved;if(console.log("RetrieveUserCart:",t),console.log("RetrieveUserCart's PreviousRetrieved1:",r),null!=t&&0==r){var o=g.a.auth().currentUser.uid;console.log("RetrieveUserCart UserID:",o),m.database().ref(String(o)).once("value").then((function(e){1==e.hasChild("SavedShoppingCart")&&1==e.hasChild("SavedShoppingCart2")&&(console.log(e.val().SavedShoppingCart),n((function(t){return[].concat(Object(u.a)(t),Object(u.a)(e.val().SavedShoppingCart))})),console.log(e.val().SavedShoppingCart2),a((function(t){return[].concat(Object(u.a)(t),Object(u.a)(e.val().SavedShoppingCart2))})))})),i(!0)}else null==t&&1==r&&(n((function(e){return[].concat()})),a((function(e){return[].concat()})),i(!1));return null},P=function(){var e=Object(a.useState)({}),t=Object(c.a)(e,2),n=t[0],i=t[1],o=Object(a.useState)(!1),u=Object(c.a)(o,2),p=u[0],h=u[1],d=Object(a.useState)(!1),S=Object(c.a)(d,2),m=S[0],C=S[1],v=Object.values(n),b=Object(a.useState)([]),O=Object(c.a)(b,2),y=O[0],k=O[1],w=Object(a.useState)([]),z=Object(c.a)(w,2),R=z[0],P=z[1],F=Object(a.useState)(null),U=Object(c.a)(F,2),x=U[0],q=U[1],A=Object(a.useState)(!1),D=Object(c.a)(A,2),B=D[0],G=D[1];return Object(a.useEffect)((function(){var e=function(e){e.val()&&i(e.val())};return f.on("value",e,(function(e){return alert(e)})),function(){f.off("value",e)}}),[]),Object(a.useEffect)((function(){g.a.auth().onAuthStateChanged(q)}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(_,{user:x,setShoppingCart:k,setShoppingCart2:P,PreviousRetrieved:B,setPreviousRetrieved:G}),r.a.createElement(s.f,{fixed:"top"},r.a.createElement(s.f.Segment,{align:"end"},r.a.createElement(I,{user:x,ShoppingCart:y,setShoppingCart:k,ShoppingCart2:R,setShoppingCart2:P,setPreviousRetrieved:G,PreviousRetrieved:B}),r.a.createElement(s.f.Item,{onClick:function(){C(0==m)}},r.a.createElement("img",{src:"https://imageog.flaticon.com/icons/png/512/2/2772.png?size=1200x630f&pad=10,10,10,10&ext=png&bg=FFFFFFFF",alt:"Shopping Cart Icon",role:"presentation",width:"25",height:"25"})))),r.a.createElement(l.a,{sidebar:r.a.createElement(E,{ShoppingCart:y,setShoppingCart:k,ShoppingCart2:R,setShoppingCart2:P,user:x}),open:p,docked:m,pullRight:!0,onSetOpen:h,styles:{sidebar:{position:"fixed",background:"white"}}}),r.a.createElement(s.d,null,r.a.createElement(j,{products:v,ShoppingCart:y,setShoppingCart:k,ShoppingCart2:R,setShoppingCart2:P})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(P,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[24,1,2]]]);
//# sourceMappingURL=main.79daafcc.chunk.js.map